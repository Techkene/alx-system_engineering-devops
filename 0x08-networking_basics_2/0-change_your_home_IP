#!/usr/bin/env bash

#Check if the script is running with root privileges
if [[ $EUID -ne 0 ]]; then
    echo "This script must be run as root. Please use sudo or run as root user."
    exit 1
fi

#Define the mappings for localhost and facebook.com
localhost_mapping="127.0.0.2"
facebook_mapping="8.8.8.8"

#Check if /etc/hosts file exists
hosts_file="/etc/hosts"
if [ ! -f "$hosts_file" ]; then
    echo "Error: $hosts_file not found. Exiting..."
    exit 1
fi

#Check if the mappings already exist in the hosts file
if grep -q -P "^\s*$localhost_mapping\s+localhost\s*$" "$hosts_file"; then
    echo "localhost mapping already exists."
else
    #Add localhost mapping to the hosts file
    echo -e "$localhost_mapping\tlocalhost" >> "$hosts_file"
    echo "localhost mapping added to $hosts_file."
fi

if grep -q -P "^\s*$facebook_mapping\s+facebook.com\s*$" "$hosts_file"; then
    echo "facebook.com mapping already exists."
else
    #Add facebook.com mapping to the hosts file
    echo -e "$facebook_mapping\tfacebook.com" >> "$hosts_file"
    echo "facebook.com mapping added to $hosts_file."
fi

echo "Configuration completed."
